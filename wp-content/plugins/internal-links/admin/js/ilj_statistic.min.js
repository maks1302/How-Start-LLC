"use strict";var __webpack_modules__={"./assets/admin/js/components/ilj_modal.js":(t,e,a)=>{function i(t,e){var a=jQuery("<div/>").addClass("ilj_modal show"),i=jQuery("<div/>").addClass("ilj_modal_wrap").append(a),n=jQuery("<div/>").addClass("ilj_modal_header").append(jQuery("<h2 />").text(t)),s=jQuery("<div/>").addClass("ilj_modal_body").html(e),r=jQuery("<div/>").addClass("ilj_modal_footer").append(jQuery("<button/>").text("OK").addClass("button button-primary").on("click",(function(t){l(t)}))),l=function(){a.removeClass("show").addClass("hide"),jQuery("body").css({overflowY:"auto"}),setTimeout((function(){i.remove()}),200)}.bind(i);a.append(n),a.append(s),a.append(r),jQuery("body").append(i).css({overflowY:"hidden"})}a.r(e),a.d(e,{iljCreateModal:()=>i})}},__webpack_module_cache__={};function __nested_webpack_require_1849__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var a=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](a,a.exports,__nested_webpack_require_1849__),a.exports}__nested_webpack_require_1849__.d=(t,e)=>{for(var a in e)__nested_webpack_require_1849__.o(e,a)&&!__nested_webpack_require_1849__.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},__nested_webpack_require_1849__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__nested_webpack_require_1849__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __nested_webpack_exports__={};(()=>{__nested_webpack_require_1849__.r(__nested_webpack_exports__);var t=__nested_webpack_require_1849__("./assets/admin/js/components/ilj_modal.js");!function(e){e.fn.ilj_tabnav=function(){var t=this;e(this).find(".nav-tab-wrapper").on("click","a",(function(){e(this).addClass("nav-tab-active"),e(this).siblings("a").removeClass("nav-tab-active"),t.find(".tab-content").removeClass("active"),t.find(".tab-content#"+e(this).data("target")).addClass("active")}))};var a={width:"",maxWidth:"200",useTitle:!0,delay:100,speed:500,background:"#32373c",color:"#eeeeee",size:"small"},i={aria:{sortAscending:ilj_statistic_translation.datatables_aria_sortAscending,sortDescending:ilj_statistic_translation.datatables_aria_sortDescending},paginate:{first:ilj_statistic_translation.datatables_paginate_first,last:ilj_statistic_translation.datatables_paginate_last,next:ilj_statistic_translation.datatables_paginate_next,previous:ilj_statistic_translation.datatables_paginate_previous},emptyTable:ilj_statistic_translation.datatables_empty_table,info:ilj_statistic_translation.datatables_info,infoEmpty:ilj_statistic_translation.datatables_info_empty,infoFiltered:ilj_statistic_translation.datatables_info_filtered,lengthMenu:ilj_statistic_translation.datatables_length_menu,loadingRecords:ilj_statistic_translation.datatables_loading_records,processing:ilj_statistic_translation.datatables_processing,search:ilj_statistic_translation.datatables_search,zeroRecords:ilj_statistic_translation.datatables_zero_records};e((function(){var t=e(".warning-tip");if(t.length){var i=e.extend(Object.assign({},a),{tooltipHover:!0,useTitle:!1,content:e("<div/>").html(t.find(".the-tip").html()).css({margin:"10px 20px",display:"block"}),maxWidth:"250px"});t.iljtipso(i)}})),e((function(){var n=ilj_link_statistic_filter_types.reduce((function(t,e){return void 0===t[e.main_type]&&(t[e.main_type]=new Set),t[e.main_type].add(e.sub_type),t}),{}),s={};Object.keys(n).forEach((function(t,e){s[t]=Array.from(new Set(n[t]))}));var r=function(){var t=e('<div id="ilj-type-filter-wrapper" class="ilj-type-filter-wrapper"/>'),a=e('<ul id="ilj-link-statistics-filter" />'),i=e("<a/>").addClass("ilj-type-filter-dropdown").text(ilj_statistic_translation.filter_type).on("click",(function(){t.toggleClass("show")}));return t.append(i,a),e.each(s,(function(t,i){var s=function(t){switch(t){case"post":t=ilj_statistic_translation.filter_section_posts_pages;break;case"term":t=ilj_statistic_translation.filter_section_taxonomies;break;case"custom":t=ilj_statistic_translation.filter_section_custom_links}return t}(t),r=e("<li/>").html(e("<span/>").text(s)),l=e("<ul/>");a.append(r),i.length&&r.append(l),e.each(i,(function(a,i){var s=e("<input/>").attr({type:"checkbox"}).on("change",(function(){!0===e(this).prop("checked")?n[t].add(i):n[t].delete(i),jQuery(".ilj-statistic-table-links").dataTable().api().ajax.reload()}));n[t].has(i)&&s.attr("checked",!0);var r=e("<label/>").html(e("<span/>").text(i).attr("data-type",t)),o=e("<li/>").addClass("type").html(r);r.prepend(s),l.append(o)}))})),t},l=e(".ilj-statistic").find(".nav-tab-wrapper");function o(t,e,a){const i=document.createElement(t);e&&(i.innerText=e),Object.entries(a).forEach((function([t,e]){i.setAttribute(t,e)}));const n=i.outerHTML;return i.remove(),n}l.length&&e(".ilj-statistic").ilj_tabnav(),e(".tip").iljtipso(a),function(){!function(){var t=document.createElement("table");t.className="ilj-statistic-table-links display";var e=document.createElement("thead"),a=document.createElement("tr");header_titles.forEach((t=>{var e=document.createElement("th");"Type"===t&&(e.className="type"),e.textContent=t,a.appendChild(e)})),e.appendChild(a);var i=document.createElement("tbody");t.appendChild(e),t.appendChild(i);var n=document.getElementById("statistic-links");n&&n.appendChild(t)}();var s=jQuery(".ilj-statistic-table-links");jQuery(".ilj-statistic-table-links tbody").append(""),l.show(),e("#statistic-links").append(s);var d=s.DataTable({stateSave:!1,serverSide:!0,processing:!0,searchDelay:800,ajax:{beforeSend:function(){e("#link-statistics-loader").show()},url:ajaxurl,type:"POST",data:{action:"load_link_statistics",nonce:ilj_dashboard.nonce,main_types:function(){return Object.keys(n)},sub_types:function(){var t=Object.values(n).reduce((function(t,e){return t.concat(Array.from(e))}),[]);return Array.from(new Set(t))}}},columnDefs:[{className:"asset-title",responsivePriority:1,targets:0,data:null,render:function(t,e,a){return a.title.replace(/<\/?[^>]+(>|$)/g,"")}},{targets:1,data:null,render:function(t,e,a){return a.keywords_count}},{className:"type",responsivePriority:2,data:null,targets:2,render:function(t,e,a){return o("span",a.sub_type?a.sub_type:a.main_type,{"data-type":a.main_type})}},{responsivePriority:3,data:null,targets:3,render:function(t,e,a){return 0===parseInt(a.incoming_links)?"-":o("a",a.incoming_links,{"data-type":a.main_type,title:ilj_statistic_translation.show_incoming_links,class:"tip ilj-statistic-detail","data-id":a.id,"data-direction":"to"})}},{responsivePriority:4,data:null,targets:4,render:function(t,e,a){return 0===parseInt(a.outgoing_links)?"-":o("a",a.outgoing_links,{"data-type":a.main_type,title:ilj_statistic_translation.show_outgoing_links,class:"tip ilj-statistic-detail","data-id":a.id,"data-direction":"from"})}},{responsivePriority:5,data:null,targets:5,orderable:!1,render:function(t,e,a){return`<a href="${a.edit_link}" title="${a.edit_title}" class="tip"><span class="dashicons dashicons-edit"></span></a> <a class="tip"  target="_blank" rel="noopener" href="${a.permalink}" title="${a.permalink_title}"><span class="dashicons dashicons-external"></span></a>`}}],language:i,stateLoaded:function(t,e){s.find(".tip").iljtipso(a)},drawCallback:function(t){const a=document.getElementById("ilj-type-filter-wrapper");a&&a.parentNode.removeChild(a),e("#statistic-links .dataTables_wrapper .dataTables_filter").append(r()),e("#link-statistics-loader").hide()},responsive:!0});e(".dataTables_filter input",s.closest(".dataTables_wrapper")).off(),e(".dataTables_filter input",s.closest(".dataTables_wrapper")).on("keyup",(function(t){13===t.keyCode&&d.search(this.value).draw()})),s.find(".tip").iljtipso(a),s.on("click",".ilj-statistic-detail",(function(){e(".ilj-statistic-cover").show();var a=e(this).data("id"),i=e(this).data("type"),n=e(this).data("direction"),s="",r=0,l=e(this).closest("tr").find("td.asset-title").text();"to"==n?(s=ilj_statistic_translation.incoming_links,r=e(this).closest('a[data-direction="to"]').text()):"from"==n&&(s=ilj_statistic_translation.outgoing_links,r=e(this).closest('a[data-direction="from"]').text());var o={action:"ilj_render_link_detail_statistic",nonce:ilj_dashboard.nonce,id:a,type:i,direction:n};e.ajax({url:ajaxurl,type:"POST",data:o}).done((function(a){(0,t.iljCreateModal)(s+' "'+l+'" ('+r+")",e("<div/>").addClass("ilj-statistic").html(a)),e(".ilj-statistic-cover").hide()}))}))}(),function(){!function(){var t=document.createElement("table");t.className="ilj-statistic-table-anchors display";var e=document.createElement("thead"),a=document.createElement("tr");"undefined"!=typeof headerLabels&&headerLabels.forEach((function(t){var e=document.createElement("th");e.textContent=t,a.appendChild(e)})),e.appendChild(a);var i=document.createElement("tbody");t.appendChild(e),t.appendChild(i);var n=document.getElementById("statistic-anchors");n&&n.appendChild(t)}();var n=ajaxurl.replace("admin-ajax.php","images/spinner.gif");e("body").append('<div style="position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);display:none" id="loading-icon"><img src="'+n+'" alt="'+ilj_dashboard.loadingText+'"></div>');var s=e("#loading-icon"),r=jQuery(".ilj-statistic-table-anchors");e("#statistic-anchors").html(r);var l=r.DataTable({ajax:{url:ajaxurl,type:"POST",data:function(t){t.action="load_anchor_statistics_chunk",t.nonce=ilj_dashboard.nonce}},processing:!1,serverSide:!0,language:i,stateLoaded:function(t,e){r.find(".tip").iljtipso(a)},columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,searchable:!1,targets:3},{responsivePriority:3,searchable:!1,orderable:!1,targets:2},{responsivePriority:4,searchable:!1,orderable:!1,targets:1}],responsive:!0,searchDelay:1e3}).on("processing.dt",(function(t,e,a){s.toggle(a)}));e("#statistic-anchors input").off("keypress").on("keypress",(function(t){13==t.which&&l.search(this.value).draw()})),r.on("click",".ilj-statistic-detail",(function(){e(".ilj-statistic-cover").show();var a=e(this).data("anchor"),i=e(this).text(),n={action:"ilj_render_anchor_detail_statistic",nonce:ilj_dashboard.nonce,anchor:a};e.ajax({url:ajaxurl,type:"POST",data:n}).done((function(n){(0,t.iljCreateModal)(ilj_statistic_translation.anchor_text+' "'+a+'" ('+i+")",e("<div/>").addClass("ilj-statistic").html(n)),e(".ilj-statistic-cover").hide()}))}))}()})),e(document).on("mouseup",(function(t){var a=e("#ilj-type-filter-wrapper");a.is(t.target)||0!==a.has(t.target).length||a.removeClass("show")}))}(jQuery)})();
//# sourceMappingURL=ilj_statistic.min.js.map